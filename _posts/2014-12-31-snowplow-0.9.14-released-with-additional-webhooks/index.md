---
layout: post
title: Snowplow 0.9.14 released with additional webhooks
title-short: Snowplow 0.9.14
tags: [snowplow, enrichment, bug, webhooks]
author: Alex
category: Releases
permalink: /blog/2014/12/31/snowplow-0.9.14-released-with-additional-webhooks/
---

We are pleased to announce the release of Snowplow 0.9.14, our 17th and final release of Snowplow for 2014! This release contains a variety of important bug fixes, plus support for three new event streams which can be loaded into your Snowplow event warehouse and unified log:

- **Mandrill** - for tracking email and email-related events delivered by [Mandrill] [mandrill-website]
- **PagerDuty** - for tracking incidents generated by [PagerDuty] [pagerduty-website]
- **Pingdom** - for tracking site outages detected by [Pingdom] [pingdom-website]

Read on for more information:

1. [Mandrill webhook support](#mandrill)
2. [PagerDuty webhook support](#pagerduty)
3. [Pingdom webhook support](#pingdom)
4. [Vagrant support](#vagrant)
5. [EmrEtlRunner improvements](#emr-etl-runner)
6. [Making Hadoop Enrich and Hadoop Shred more tolerant](#hadoop-jobs)
7. [Clojure Collector bug fixes](#clojure)
8. [CloudFront Collector bug fix](#cloudfront)
9. [Upgrading](#upgrading)
10. [Help](/blog/2014/12/31/snowplow-0.9.14-released-with-additional-webhooks/#help)

<!--more-->

<h2><a name="mandrill">1. Mandrill webhook support</a></h2>

The Mandrill webhook adapter lets you track email and email-related events delivered by [Mandrill] [mandrill-website]. Using this functionality, you can warehouse all email-related events alongside your existing Snowplow events.

For help setting up the Mandrill support, see the [Mandrill webhook setup] [mandrill-setup] wiki page.

For technical details on this adapter, see the [Mandrill webhook adapter] [mandrill-tech-docs] wiki page.

<h2><a name="pagerduty">2. PagerDuty webhook support</a></h2>

The PagerDuty webhook adapter lets you track incidents reported by [PagerDuty] [pagerduty-website]. Using this you can record all incident related events from PagerDuty with existing Snowplow events.

For help setting up PagerDuty support, see the [PagerDuty webhook setup] [pagerduty-setup] wiki page.

For technical details on this adapter, see the [PagerDuty webhook adapter] [pagerduty-tech-docs] wiki page.

<h2><a name="pingdom">3. Pingdom webhook support</a></h2>

The Pingdom webhook adapter lets you track all site monitoring related events delivered by [Pingdom] [pingdom-website].

For help setting up Pingdom support, see the [Pingdom webhook setup] [pingdom-setup] wiki page.

For technical details on this adapter, see the [Pingdom webhook adapter] [pingdom-tech-docs] wiki page.

<h2><a name="help">4. Vagrant support</a></h2>

A big focus for 2015 is going to be on making it easier to contribute to the various Snowplow projects. As part of this, we will be implementing a standard quickstart process for hacking on any given Snowplow repository using [Vagrant] [vagrant].

The main Snowplow repository is among the first Snowplow projects to get the Vagrant quickstart treatment. A simple `vagrant up && vagrant ssh` will install all of the required development and build tools automatically for you. This is how you would get started if you wanted to hack on Snowplow's Scala Common Enrich component:

{% highlight bash %}
 host$ git clone https://github.com/snowplow/snowplow.git
 host$ cd snowplow
 host$ vagrant up && vagrant ssh
guest$ cd /vagrant/3-enrich/scala-common-enrich
guest$ sbt test
{% endhighlight %}

We hope you find this useful - expect to see other Snowplow projects (including our trackers) getting the Vagrant treatment over the coming weeks.

<h2><a name="emr-etl-runner">5. EmrEtlRunner improvements</a></h2>

We have made an important bug fix to EmrEtlRunner for Clojure Collector users: Amazon has slightly changed the event log filenames generated by the Clojure Collector in some Elastic Beanstalk environments; we have updated EmrEtlRunner so that it can pick up both the old and new filenames ([#1194] [issue-1194]).

To make debugging failed runs easier, we have updated EmrEtlRunner so that, on a job failure in EMR, the status of the overall jobflow and all individual steps are logged to stdout ([#1153] [issue-1153]).

<h2><a name="hadoop-jobs">6. Making Hadoop Enrich and Hadoop Shred more tolerant</a></h2>

We have upgraded the Hadoop Enrich and Scala Hadoop Shred jobs to make them more tolerant of the Snowplow trackers sending newer self-describing JSON versions. If you are interested in finding out more, please check out tickets [#1220] [issue-1220] and [#1231] [issue-1231].

We have also relaxed the Hadoop Enrich job to accept Snowplow events `POST`ed with an `application/json` content-type **not** including a `charset=utf-8` parameter ([#1257] [issue-1257]).

The improvements to Scala Hadoop Enrich were implemented in the underlying Scala Common Enrich library, and will be applied to our Kinesis event flow in the next Kinesis release.

<h2><a name="clojure">7. Clojure Collector bug fixes</a></h2>

We are making available a patch release of the Clojure Collector, version 0.9.1. This fixes two important bugs:

1. We increased Tomcat's HTTP header tolerance to 64kB to handle much larger GET requests, such as those containing multiple large contexts ([#1249] [issue-1249]). Many thanks to Anton Kirillov for identifying this issue
2. We changed the 1x1 pixel response to use a "stable" GIF image ([#1258] [issue-1258]). This is needed to successfully track email opens in Gmail. Many thanks to Jaime Irurzun for identifying this issue

Please note that this is the last Clojure Collector release that will support Tomcat 7; by default new Elastic Beanstalk applications expect Tomcat 8, and we have a version of the Clojure Collector in the works to support this.

<h2><a name="cloudfront">8. CloudFront Collector bug fix</a></h2>

The CloudFront Collector was affected by the same problem as the Clojure Collector: the 1x1 GIF image was not "stable", leading to Gmail's image-prefetcher not fetching it, and thus email opens in Gmail not being tracked in Snowplow.

We have now replaced the CloudFront pixel with a "stable" GIF ([#1259] [issue-1259]).

<h2><a name="upgrading">9. Upgrading</a></h2>

<div class="html">
<h3><a name="upgrading-emretlrunner">9.1 Upgrading your EmrEtlRunner</a></h3>
</div>

You need to update EmrEtlRunner to the latest code (**0.10.0**) on GitHub:

{% highlight bash %}
$ git clone git://github.com/snowplow/snowplow.git
$ git checkout 0.9.14
$ cd snowplow/3-enrich/emr-etl-runner
$ bundle install --deployment
$ cd ../../4-storage/storage-loader
$ bundle install --deployment
{% endhighlight %}

<div class="html">
<h3><a name="configuring-emretlrunner">9.2 Updating your EmrEtlRunner's configuration</a></h3>
</div>

This release bumps the Hadoop Enrichment process to version **0.11.0** and the Hadoop Shredding process to version **0.3.0**.

In your EmrEtlRunner's `config.yml` file, update your `hadoop_enrich` and `hadoop_shred` jobs' versions like so:

{% highlight yaml %}
  :versions:
    :hadoop_enrich: 0.11.0 # WAS 0.10.1
    :hadoop_shred: 0.3.0 # WAS 0.2.1
{% endhighlight %}

For a complete example, see our [sample `config.yml` template] [emretlrunner-config-yml].

<div class="html">
<h3><a name="upgrading-clojure">9.3 Updating your Clojure Collector</a></h3>
</div>

This release bumps the Clojure Collector to version **0.9.1**.

To upgrade to this release:

1. Download the new warfile by right-clicking on [this link] [war-download] and selecting "Save As..."
2. Log in to your Amazon Elastic Beanstalk console
3. Browse to your Clojure Collector's application
4. Click the "Upload New Version" and upload your warfile

<div class="html">
<h3><a name="upgrading-cloudfront">9.4 Updating your CloudFront Collector</a></h3>
</div>

You can find the new pixel in our GitHub repository as [`2-collectors/cloudfront-collector/static/i`] [i-pixel] - upload this to S3, overwriting your existing pixel.

Remember to invalidate the pixel in your CloudFront distribution.

<div class="html">
<h3><a name="upgrading-change-form">9.5 Redshift</a></h3>
</div>

Make sure to deploy Redshift tables for any of the new webhooks that you plan on ingesting into Snowplow. You can find the Redshift table deployment instructions on the corresponding webhook setup wiki pages:

* [Mandrill webhook Redshift setup] [mandrill-setup-red]
* [Pingdom webhook Redshift setup] [pingdom-setup-red]
* [PagerDuty webhook Redshift setup] [pagerduty-setup-red]

<h2><a name="help">10. Documentation and help</a></h2>

Documentation relating to the new webhook support is available on the wiki:

* [Setting up a webhook] [webhook-setup]
* [Technical documentation on webhooks] [webhook-tech-docs]

As always, if you do run into any issues or don't understand any of the new features, please [raise an issue] [issues] or get in touch with us via [the usual channels] [talk-to-us].

For more details on this release, please check out the [0.9.14 Release Notes] [snowplow-0914] on GitHub.

[pingdom-website]: https://www.pingdom.com/
[pagerduty-website]: http://www.pagerduty.com/
[mandrill-website]: https://mandrill.com/

[vagrant]: https://www.vagrantup.com

[webhook-setup]: https://github.com/snowplow/snowplow/wiki/Setting-up-a-Webhook
[webhook-tech-docs]: https://github.com/snowplow/snowplow/wiki/Snowplow-technical-documentation#1b-webhooks

[pingdom-setup]: https://github.com/snowplow/snowplow/wiki/Pingdom-webhook-setup
[pagerduty-setup]: https://github.com/snowplow/snowplow/wiki/Pagerduty-webhook-setup
[mandrill-setup]: https://github.com/snowplow/snowplow/wiki/Mandrill-webhook-setup

[pingdom-setup-red]: https://github.com/snowplow/snowplow/wiki/Pingdom-webhook-setup#setup-redshift
[pagerduty-setup-red]: https://github.com/snowplow/snowplow/wiki/Pagerduty-webhook-setup#setup-redshift
[mandrill-setup-red]: https://github.com/snowplow/snowplow/wiki/Mandrill-webhook-setup#setup-redshift

[pingdom-tech-docs]: https://github.com/snowplow/snowplow/wiki/Pingdom-webhook-adapter
[pagerduty-tech-docs]: https://github.com/snowplow/snowplow/wiki/Pagerduty-webhook-adapter
[mandrill-tech-docs]: https://github.com/snowplow/snowplow/wiki/Mandrill-webhook-adapter

[issue-1153]: https://github.com/snowplow/snowplow/issues/1153
[issue-1194]: https://github.com/snowplow/snowplow/issues/1194
[issue-1220]: https://github.com/snowplow/snowplow/issues/1220
[issue-1231]: https://github.com/snowplow/snowplow/issues/1231
[issue-1249]: https://github.com/snowplow/snowplow/issues/1249
[issue-1257]: https://github.com/snowplow/snowplow/issues/1257
[issue-1258]: https://github.com/snowplow/snowplow/issues/1258
[issue-1259]: https://github.com/snowplow/snowplow/issues/1259

[war-download]: http://s3-eu-west-1.amazonaws.com/snowplow-hosted-assets/2-collectors/clojure-collector/clojure-collector-0.9.1-standalone.war

[i-pixel]: https://github.com/snowplow/snowplow/raw/master/2-collectors/cloudfront-collector/static/i
[emretlrunner-config-yml]: https://github.com/snowplow/snowplow/blob/master/3-enrich/emr-etl-runner/config/config.yml.sample

[issues]: https://github.com/snowplow/snowplow/issues
[talk-to-us]: https://github.com/snowplow/snowplow/wiki/Talk-to-us
[snowplow-0914]: https://github.com/snowplow/snowplow/releases/0.9.14
